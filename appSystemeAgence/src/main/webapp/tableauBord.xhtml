<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Tableau de Bord</title>
</h:head>
<body>
	<ui:composition template="/templates/layout.xhtml">
		<ui:define name="content">
			<h:outputStylesheet library="css" name="style.css" />

				<!-- §§§§§§§§§§§§§§§§§§§§ CENTER §§§§§§§§§§§§§§§§§§§§ -->
				
				<p:layoutUnit position="center" resizable="true" style="border: 0;">
					<p:tabView>
						<p:tab title="Liste des visites">
							<!-- ================ LISTE VISITES BIENS A ACHETER ===== -->
				<div>
					<p:fieldset legend="Visites des biens immobiliers en vente" collapsed="false"
						toggleable="true" toggleOrientation="vertical">
					<p:dataTable id="liste" value="#{agenceMB.listeVisites}"
						var="visite">

						<f:facet name="header">
							<p:row>
								<p:column colspan="7">Liste des visites</p:column>
							</p:row>
						</f:facet>

						<p:column>
							<f:facet name="header">
								<h:outputText value="ID" />
							</f:facet>
							<h:outputText value="#{visite.id}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Date" />
							</f:facet>
							<h:outputText value="#{visite.date}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Heure" />
							</f:facet>
							<h:outputText value="#{visite.heure}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du bien à acheter" />
							</f:facet>
							<h:outputText value="#{visite.bienAAcheter}" />
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du client" />
							</f:facet>
							<h:outputText value="#{visite.client.id}" />
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du conseiller" />
							</f:facet>
							<h:outputText value="#{visite.conseiller.id}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Supprimer" />
							</f:facet>
							<p:commandButton icon="ui-icon-trash"
								actionListener="#{agenceMB.removeVisite}">
								<f:param name="classeStdId" value="#{visite.id}" />
								<f:ajax render="liste" />
							</p:commandButton>
						</p:column>

					</p:dataTable>
					</p:fieldset>
				</div>

				<p:spacer height="10" />

				<div>
					<p:commandButton value="Ajouter une visite pour un achat"
						id="addClasse" onclick="PF('dlg').show();"
						actionListener="#{agenceMB.initVisite}"
						styleClass="ui-priority-primary" />

					<p:growl id="growl" sticky="true" showDetail="true" life="3000" />

					<p:dialog header="Ajout d'une visite" widgetVar="dlg"
						resizable="true">
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="date1" value="Date :" />
							<p:inputText id="date1"
								value="#{agenceMB.visite.date}" required="true"
								label="date" />

							<h:outputLabel for="heure1" value="Heure :" />
							<p:inputText id="heure1"
								value="#{agenceMB.visite.heure}"
								required="true" label="heure" />

							<h:outputLabel for="idBienAAcheter" value="Prix max :" />
							<p:inputText id="idBienAAcheter"
								value="#{agenceMB.visite.bienAAcheter.id}" required="true"
								label="idBienAAcheter" />

							<h:outputLabel for="idClient" value="id du client : " />
							<p:inputText id="idClient"
								value="#{agenceMB.client.id}" required="true"
								label="idClient" />
								
							<h:outputLabel for="idConseiller" value="id du conseiller : " />
							<p:inputText id="idConseiller"
								value="#{agenceMB.conseiller.id}" required="true"
								label="idConseiller" />

							<f:facet name="footer">
								<p:commandButton value="Valider" update="growl"
									actionListener="#{agenceMB.addClasseStandard}"
									oncomplete="handleLoginRequest(xhr, status, args)" >
									<f:ajax render="liste"/>
									</p:commandButton>
							</f:facet>
						</h:panelGrid>
					</p:dialog>

					<script type="text/javascript">
					function handleLoginRequest(xhr, status, args) {
						if (!args.validForm) {
							PF('dlg').jq.effect("shake", {
								times : 5
							}, 100);
						} else {
							PF('dlg').hide();
							$('#loginLink').fadeOut();
						}
					}
				</script>
				</div>

				
				<p:spacer height="10" />
			
				<!-- ================ LISTE VISITES BIENS A LOUER ===== -->
				<div>
					<p:fieldset legend="Visites des biens immobiliers à louer" collapsed="false"
						toggleable="true" toggleOrientation="vertical">
					<p:dataTable id="liste" value="#{agenceMB.listeVisites}"
						var="visite">

						<f:facet name="header">
							<p:row>
								<p:column colspan="7">Liste des visites</p:column>
							</p:row>
						</f:facet>

						<p:column>
							<f:facet name="header">
								<h:outputText value="ID" />
							</f:facet>
							<h:outputText value="#{visite.id}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Date" />
							</f:facet>
							<h:outputText value="#{visite.date}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Heure" />
							</f:facet>
							<h:outputText value="#{visite.heure}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du bien à louer" />
							</f:facet>
							<h:outputText value="#{visite.bienALouer}" />
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du client" />
							</f:facet>
							<h:outputText value="#{visite.client.id}" />
						</p:column>
						
						<p:column>
							<f:facet name="header">
								<h:outputText value="Id du conseiller" />
							</f:facet>
							<h:outputText value="#{visite.conseiller.id}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Supprimer" />
							</f:facet>
							<p:commandButton icon="ui-icon-trash"
								actionListener="#{agenceMB.removeVisite}">
								<f:param name="classeStdId" value="#{visite.id}" />
								<f:ajax render="liste" />
							</p:commandButton>
						</p:column>

					</p:dataTable>
					</p:fieldset>
				</div>

				<p:spacer height="10" />

				<div>
					<p:commandButton value="Ajouter une visite pour une location"
						id="addClasse" onclick="PF('dlg').show();"
						actionListener="#{agenceMB.initVisite}"
						styleClass="ui-priority-primary" />

					<p:growl id="growl" sticky="true" showDetail="true" life="3000" />

					<p:dialog header="Ajout d'une visite" widgetVar="dlg"
						resizable="true">
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="date1" value="Date :" />
							<p:inputText id="date1"
								value="#{agenceMB.visite.date}" required="true"
								label="date" />

							<h:outputLabel for="heure1" value="Heure :" />
							<p:inputText id="heure1"
								value="#{agenceMB.visite.heure}"
								required="true" label="heure" />

							<h:outputLabel for="idBienAAcheter" value="Prix max :" />
							<p:inputText id="idBienAAcheter"
								value="#{agenceMB.visite.bienAAcheter.id}" required="true"
								label="idBienAAcheter" />

							<h:outputLabel for="idClient" value="id du client : " />
							<p:inputText id="idClient"
								value="#{agenceMB.client.id}" required="true"
								label="idClient" />
								
							<h:outputLabel for="idConseiller" value="id du conseiller : " />
							<p:inputText id="idConseiller"
								value="#{agenceMB.conseiller.id}" required="true"
								label="idConseiller" />

							<f:facet name="footer">
								<p:commandButton value="Valider" update="growl"
									actionListener="#{agenceMB.addClasseStandard}"
									oncomplete="handleLoginRequest(xhr, status, args)" >
									<f:ajax render="liste"/>
									</p:commandButton>
							</f:facet>
						</h:panelGrid>
					</p:dialog>
				</div>
						</p:tab>
						
						<p:tab title="Informations personnelles">

							<h:form>
								<p:fieldset legend="Identité" collapsed="false" toggleable="true"
									toggleOrientation="vertical">
									<h:panelGrid columns="2">

										<p:outputLabel for="prenom" value="Prénom : " />
										<h:outputText id="prenom"
											value="#{agenceMB.utilisateur.prenom}" />


										<p:outputLabel for="nom" value="Nom : " />
										<h:outputText id="nom" value="#{agenceMB.utilisateur.nom}" />



										<p:outputLabel for="tel" value="Téléphone privé : " />
										<h:outputText id="tel"
											value="#{agenceMB.utilisateur.telPrive}" />

									</h:panelGrid>
								</p:fieldset>
								<p:spacer height="20" />



								<p:fieldset legend="Adresse" collapsed="false" toggleable="true"
									toggleOrientation="vertical">
									<h:panelGrid columns="2">

										<p:outputLabel for="rue" value="Rue : " />
										<h:outputText id="rue"
											value="#{agenceMB.utilisateur.adresse.rue}" />

										<p:outputLabel for="codePostal" value="Code postal : " />
										<h:outputText id="codePostal"
											value="#{agenceMB.utilisateur.adresse.codePostal}"
											required="true" />

										<p:outputLabel for="ville" value="Ville : " />
										<h:outputText id="ville"
											value="#{agenceMB.utilisateur.adresse.ville}" />

									</h:panelGrid>
								</p:fieldset>
								<p:spacer height="20" />

								<p:fieldset legend="Login" collapsed="false" toggleable="true"
									toggleOrientation="vertical">
									<h:panelGrid columns="2">

										<p:outputLabel for="login" value="Identifiant : " />
										<h:outputText id="login"
											value="#{agenceMB.utilisateur.login}" />
									</h:panelGrid>
								</p:fieldset>
								<p:spacer height="20" />

								<h:panelGrid columns="3">
									<p:commandButton id="modifier" value="Modifier" action="versFormulaireAjoutConseiller" actionListener="#{agenceMB.selectConseiller}">
										<f:param id="modifierConseiller" name="id" value="#{utilisateur.id}"></f:param>
									</p:commandButton>
								</h:panelGrid>

							</h:form>
						</p:tab>

						<p:tab title="Liste des ventes réalisées">
							<h:panelGrid columns="2" cellpadding="10">
								<h:outputText value="Francis Ford Coppola's legendary..." />
							</h:panelGrid>
						</p:tab>
						
					</p:tabView>
				</p:layoutUnit>

		</ui:define><!-- content -->
		
	</ui:composition>
</body>
</html>